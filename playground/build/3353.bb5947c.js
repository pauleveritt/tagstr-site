"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[3353],{3353:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var a,o=n(5537),r=n(68629),i=n(87776),l=n(74512),s=n(25020),c=n(32598),d=n(34561),p=n(6730),u=n(62877),m=n(22556),g=n(80212),h=n(6850),y=n(95297),b=n(12142),f=n(56114),v=n(47659),w=n(77626),_=n.n(w),x=n(5669);!function(e){e.open="plugin-manager:open"}(a||(a={}));class I extends x.PluginListModel{constructor(e){super(e),this._availablePlugins=e.pluginData.availablePlugins.map((e=>{let t=e.provides?e.provides.name.split(":")[1]:void 0;return e.provides&&!t&&(t=e.provides.name),{...e,tokenLabel:t,locked:!0,enabled:!0}}))}get available(){return this._availablePlugins}async refresh(){}async enable(e){}async disable(e){}}const C={id:"@jupyterlite/application-extension:plugin-manager",description:"Plugin manager viewer",autoStart:!0,optional:[u.ITranslator,r.ICommandPalette],provides:x.IPluginManager,activate:(e,t,n)=>{if(!(e instanceof o.JupyterLab))return{open:async()=>{console.info("Plugin manager viewer is only available in JupyterLab")}};const{commands:i,serviceManager:l,shell:s}=e,c=(t=null!=t?t:u.nullTranslator).load("jupyterlab"),d=c.__("Plugin Manager"),p=c.__("Advanced Plugin Manager"),g=new r.WidgetTracker({namespace:"plugin-manager"}),h=e.info.availablePlugins;return i.addCommand(a.open,{label:p,execute:e=>{const n=function(e){const n=new I({...e,pluginData:{availablePlugins:h},serverSettings:l.serverSettings,extraLockedPlugins:[C.id],translator:null!=t?t:u.nullTranslator}),a=new x.Plugins({model:n,translator:null!=t?t:u.nullTranslator});return a.title.label=p,a.title.icon=m.extensionIcon,a.title.caption=c.__("Plugin Manager"),new r.MainAreaWidget({content:a,reveal:n.ready})}(e);return s.add(n,"main",{type:"Plugins"}),g.add(n),n.content.model.trackerDataChanged.connect((()=>{g.save(n)})),n}}),n&&n.addItem({command:a.open,category:d}),{open:()=>e.commands.execute(a.open)}}},j=new RegExp("/(lab|tree|notebooks|edit|consoles)\\/?");var k;!function(e){e.about="application:about",e.docmanagerDownload="docmanager:download",e.filebrowserDownload="filebrowser:download",e.copyShareableLink="filebrowser:share-main"}(k||(k={}));const P="jupyterlite",S={id:"@jupyterlite/application-extension:about",autoStart:!0,requires:[u.ITranslator],optional:[r.ICommandPalette,d.IMainMenu],activate:(e,t,n,a)=>{const{commands:o}=e,i=t.load(P),l=i.__("Help");o.addCommand(k.about,{label:i.__("About %1",e.name),execute:()=>{const t=i.__("Version %1",e.version),n=_().createElement("span",{className:"jp-About-version-info"},_().createElement("span",{className:"jp-About-version"},t)),a=_().createElement("span",{className:"jp-About-header"},_().createElement("div",{className:"jp-About-header-info"},_().createElement(b.liteWordmark.react,{height:"auto",width:"196px"}),n)),o=_().createElement("span",{className:"jp-About-externalLinks"},_().createElement("a",{href:"https://github.com/jupyterlite/jupyterlite/graphs/contributors",target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},i.__("CONTRIBUTOR LIST")),_().createElement("a",{href:"https://github.com/jupyterlite/jupyterlite",target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},i.__("JUPYTERLITE ON GITHUB"))),l=_().createElement("span",{className:"jp-About-copyright"},i.__("Â© 2021-2022 JupyterLite Contributors")),s=_().createElement("div",{className:"jp-About-body"},o,l);return(0,r.showDialog)({title:a,body:s,buttons:[r.Dialog.createButton({label:i.__("Dismiss"),className:"jp-About-button jp-mod-reject jp-mod-styled"})]})}}),n&&n.addItem({command:k.about,category:l}),a&&a.helpMenu.addGroup([{command:k.about}],0)}},L={id:"@jupyterlite/application-extension:download",autoStart:!0,requires:[u.ITranslator,l.IDocumentManager],optional:[r.ICommandPalette,s.IFileBrowserFactory],activate:(e,t,n,a,o)=>{const i=t.load(P),{commands:l,serviceManager:s,shell:c}=e,{contents:d}=s,p=()=>{const{currentWidget:e}=c;return!(!e||!n.contextForWidget(e))},u=async(e,t)=>{var n,a,o;const r=await d.get(e,{content:!0}),i=document.createElement("a");if("notebook"===r.type||"json"===r.format||"text/json"===r.mimetype){const e=null!==(n=r.mimetype)&&void 0!==n?n:"text/json",t=JSON.stringify(r.content,null,2);i.href=`data:${e};charset=utf-8,${encodeURIComponent(t)}`}else if("text"===r.format||"text/plain"===r.mimetype){const e=null!==(a=r.mimetype)&&void 0!==a?a:"text/plain";i.href=`data:${e};charset=utf-8,${encodeURIComponent(r.content)}`}else{if("base64"!==r.format&&"application/octet-stream"!==r.mimetype)throw new Error(`Content whose mimetype is "${r.mimetype}" cannot be downloaded`);{const e=null!==(o=r.mimetype)&&void 0!==o?o:"application/octet-stream";i.href=`data:${e};base64,${r.content}`}}i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)};l.addCommand(k.docmanagerDownload,{label:i.__("Download"),caption:i.__("Download the file to your computer"),isEnabled:p,execute:async()=>{const e=c.currentWidget;if(!p()||!e)return;const t=n.contextForWidget(e);if(!t)return(0,r.showDialog)({title:i.__("Cannot Download"),body:i.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:i.__("OK")})]});await t.save();try{await u(t.path,t.path)}catch(e){return(0,r.showDialog)({title:i.__("Cannot Download"),body:JSON.stringify(e),buttons:[r.Dialog.okButton({label:i.__("OK")})]})}}});const g=i.__("File Operations");if(a&&a.addItem({command:k.docmanagerDownload,category:g}),o){const{tracker:e}=o;l.addCommand(k.filebrowserDownload,{execute:async()=>{const t=e.currentWidget;t&&Array.from(t.selectedItems()).forEach((async e=>{if("directory"!==e.type)try{await u(e.path,e.name)}catch(e){return(0,r.showDialog)({title:i.__("Cannot Download"),body:JSON.stringify(e),buttons:[r.Dialog.okButton({label:i.__("OK")})]})}}))},icon:m.downloadIcon.bindprops({stylesheet:"menuItem"}),label:i.__("Download")})}}},D={id:"@jupyterlite/application-extension:licenses-client",autoStart:!0,provides:r.ILicensesClient,activate:e=>new g.LiteLicensesClient},E={id:"@jupyterlite/application-extension:logo",optional:[o.ILabShell],autoStart:!0,activate:(e,t)=>{if(!t)return;const n=new v.Widget;b.liteIcon.element({container:n.node,elementPosition:"center",margin:"2px 2px 2px 8px",height:"auto",width:"16px"}),n.id="jp-MainLogo",t.add(n,"top",{rank:0})}},T={id:"@jupyterlite/application-extension:lsp-connection-manager",autoStart:!0,requires:[c.IWidgetLSPAdapterTracker],provides:c.ILSPDocumentConnectionManager,activate:(e,t)=>{const n=new class extends c.LanguageServerManager{async fetchSessions(){}}({settings:e.serviceManager.serverSettings});return new c.DocumentConnectionManager({languageServerManager:n,adapterTracker:t})}},M={id:"@jupyterlite/application-extension:notify-commands",autoStart:!0,optional:[o.ILabShell],activate:(e,t)=>{t&&t.layoutModified.connect((()=>{e.commands.notifyCommandChanged()}))}},R={id:"@jupyterlite/application-extension:opener",autoStart:!0,requires:[o.IRouter,l.IDocumentManager],optional:[o.ILabShell,p.ISettingRegistry],activate:(e,t,n,a,o)=>{const{commands:r,docRegistry:l}=e,s="router:tree";r.addCommand(s,{execute:s=>{var c;const d=s,{request:p,search:u}=d;if(null!==(c=p.match(j))&&void 0!==c&&!c)return;const m=new URLSearchParams(u),g=m.getAll("path");if(0===g.length)return;const h=g.map((e=>decodeURIComponent(e)));e.started.then((async()=>{var e;const s=i.PageConfig.getOption("notebookPage"),[c]=h;if("tree"===s){let e="/edit";"Notebook"===l.defaultWidgetFactory(c).name&&(e="/notebooks");const t=i.PageConfig.getBaseUrl(),n=new URL(i.URLExt.join(t,e,"index.html"));return n.searchParams.append("path",c),void(window.location.href=n.toString())}if("consoles"!==s)if("notebooks"===s||"edit"===s){let t=l.defaultWidgetFactory(c).name;if(o){const e=(await o.load("@jupyterlab/docmanager-extension:plugin")).get("defaultViewers").composite;l.getFileTypesForPath(c).forEach((n=>{void 0!==e[n.name]&&l.getWidgetFactory(e[n.name])&&(t=e[n.name])}))}const a=null!==(e=m.get("factory"))&&void 0!==e?e:t;n.open(c,a,void 0,{ref:"_noref"})}else{h.forEach((e=>n.open(e)));const e=new URL(i.URLExt.join(i.PageConfig.getBaseUrl(),p));e.searchParams.delete("path");const{pathname:o,search:l}=e;if(t.navigate(`${o}${l}`,{skipRouting:!0}),a){const e=()=>{r.execute("docmanager:show-in-file-browser"),a.currentChanged.disconnect(e)};a.currentChanged.connect(e)}}else r.execute("console:create",{path:c})}))}}),t.register({command:s,pattern:j})}},U={id:"@jupyterlite/application-extension:service-worker-manager",autoStart:!0,provides:h.IServiceWorkerManager,activate:e=>{const{contents:t}=e.serviceManager;return new h.ServiceWorkerManager({contents:t})}},W={id:"@jupyterlite/application-extension:session-context-patch",autoStart:!0,requires:[l.IDocumentManager,l.IDocumentWidgetOpener],activate:(e,t,n)=>{const a=e.serviceManager.contents;n.opened.connect(((e,n)=>{var o;const r=t.contextForWidget(n);if(""===a.driveName(null!==(o=null==r?void 0:r.path)&&void 0!==o?o:""))return;const i=n.context.sessionContext;i._name=null==r?void 0:r.path,i._path=null==r?void 0:r.path}))}},N={id:"@jupyterlite/application-extension:share-file",requires:[s.IFileBrowserFactory,u.ITranslator],autoStart:!0,activate:(e,t,n)=>{const a=n.load(P),{commands:o,docRegistry:l}=e,{tracker:s}=t;o.addCommand(k.copyShareableLink,{execute:()=>{const e=s.currentWidget;if(!e)return;const t=i.PageConfig.getBaseUrl();let n=i.PageConfig.getOption("appUrl");const a=Array.from((0,f.filter)(e.selectedItems(),(e=>"directory"!==e.type)));if(!a.length)return;if("/tree"===n){const[e]=a;n="Notebook"===l.defaultWidgetFactory(e.path).name?"/notebooks":"/edit"}const o=new URL(i.URLExt.join(t,n,"index.html"));a.forEach((e=>{o.searchParams.append("path",e.path)})),r.Clipboard.copyToSystem(o.href)},isVisible:()=>!!s.currentWidget&&Array.from(s.currentWidget.selectedItems()).length>=1,icon:m.linkIcon.bindprops({stylesheet:"menuItem"}),label:a.__("Copy Shareable Link")})}},A={id:"@jupyterlite/application-extension:translator-connector",description:"Provides the application translation connector.",autoStart:!0,provides:u.ITranslatorConnector,activate:e=>new y.LiteTranslatorConnector},O=[S,L,D,E,T,M,R,C,U,W,N,A]}}]);
//# sourceMappingURL=3353.bb5947c.js.map